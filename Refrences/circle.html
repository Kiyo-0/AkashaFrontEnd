<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dynamic Circle Drawing</title>
<style>
    canvas {
        border: 1px solid black;
    }
</style>
</head>
<body>
<canvas id="myCanvas" width="400" height="400"></canvas>

<script>
    // Get the canvas element and its context
    const canvas = document.getElementById('myCanvas');
    const ctx = canvas.getContext('2d');

    // Array to store circle properties
    const circles = [];

    // Variables to store mouse coordinates
    let startX, startY, endX, endY;

    // Function to draw all circles in the array
    function drawCircles() {
        // Clear the canvas
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Draw each circle in the array
        circles.forEach(circle => {
            ctx.beginPath();
            ctx.arc(circle.x, circle.y, circle.radius, 0, 2 * Math.PI);
            ctx.stroke();
        });
    }

    // Function to draw a preview circle
    function drawPreviewCircle(x, y, radius) {
        // Clear previous drawings
        drawCircles();

        // Draw preview circle
        ctx.beginPath();
        ctx.arc(x, y, radius, 0, 2 * Math.PI);
        ctx.strokeStyle = 'gray';
        ctx.stroke();
    }

    // Function to handle mouse move
    function handleMouseMove(event) {
        if (startX !== undefined && startY !== undefined) {
            drawPreviewCircle(startX, startY, Math.sqrt(Math.pow(event.offsetX - startX, 2) + Math.pow(event.offsetY - startY, 2)));
        }
    }

    // Function to handle mouse down
    function handleMouseDown(event) {
        startX = event.offsetX;
        startY = event.offsetY;
        canvas.addEventListener('mousemove', handleMouseMove);
    }

    // Function to handle mouse up
    function handleMouseUp(event) {
        endX = event.offsetX;
        endY = event.offsetY;

        // Calculate circle radius
        const radius = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));

        // Add the circle to the array
        circles.push({ x: startX, y: startY, radius: radius });

        // Redraw all circles
        drawCircles();

        // Remove mousemove event listener
        canvas.removeEventListener('mousemove', handleMouseMove);
    }

    // Add event listeners
    canvas.addEventListener('mousedown', handleMouseDown);
    canvas.addEventListener('mouseup', handleMouseUp);
</script>
</body>
</html>
